<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>لوحة تحكم الإدارة - Livreure</title>
    <link rel="stylesheet" href="admin-styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-logo">
                <img src="logo.png" alt="Livreure" class="logo-img">
            </div>
            <div class="loading-spinner"></div>
            <p>جاري تحميل لوحة التحكم...</p>
        </div>
    </div>

    <!-- Login Screen -->
    <div id="login-screen" class="screen active">
        <div class="login-container">
            <div class="login-card">
                <div class="login-header">
                    <img src="logo.png" alt="Livreure" class="login-logo">
                    <h1>لوحة تحكم الإدارة</h1>
                    <p>تسجيل دخول المدير</p>
                </div>
                
                <form id="admin-login-form" class="login-form">
                    <div class="form-group">
                        <label for="admin-email">البريد الإلكتروني</label>
                        <div class="input-group">
                            <i class="fas fa-envelope"></i>
                            <input type="email" id="admin-email" name="email" placeholder="أدخل بريدك الإلكتروني" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="admin-password">كلمة المرور</label>
                        <div class="input-group">
                            <i class="fas fa-lock"></i>
                            <input type="password" id="admin-password" name="password" placeholder="أدخل كلمة المرور" required>
                            <button type="button" class="password-toggle" onclick="toggleAdminPassword()">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>
                    
                    <button type="submit" id="admin-login-btn" class="login-btn">
                        <i class="fas fa-sign-in-alt"></i>
                        تسجيل الدخول
                    </button>
                </form>
                
                <div class="login-footer">
                    <p>© 2024 Livreure. جميع الحقوق محفوظة.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Dashboard -->
    <div id="admin-dashboard" class="screen">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <img src="logo.png" alt="Livreure" class="sidebar-logo">
                <h2>لوحة التحكم</h2>
            </div>
            
            <nav class="sidebar-nav">
                <ul>
                    <li class="nav-item active">
                        <a href="#" onclick="showAdminTab('overview')" class="nav-link">
                            <i class="fas fa-chart-pie"></i>
                            <span>نظرة عامة</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" onclick="showAdminTab('users')" class="nav-link">
                            <i class="fas fa-users"></i>
                            <span>إدارة المستخدمين</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" onclick="showAdminTab('restaurants')" class="nav-link">
                            <i class="fas fa-store"></i>
                            <span>إدارة المطاعم</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" onclick="showAdminTab('orders')" class="nav-link">
                            <i class="fas fa-shopping-bag"></i>
                            <span>إدارة الطلبات</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" onclick="showAdminTab('delivery')" class="nav-link">
                            <i class="fas fa-motorcycle"></i>
                            <span>وكلاء التوصيل</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" onclick="showAdminTab('analytics')" class="nav-link">
                            <i class="fas fa-chart-line"></i>
                            <span>التحليلات</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" onclick="showAdminTab('settings')" class="nav-link">
                            <i class="fas fa-cog"></i>
                            <span>الإعدادات</span>
                        </a>
                    </li>
                </ul>
            </nav>
            
            <div class="sidebar-footer">
                <div class="admin-profile">
                    <div class="admin-avatar">
                        <i class="fas fa-user-shield"></i>
                    </div>
                    <div class="admin-info">
                        <h4 id="admin-name">مدير النظام</h4>
                        <p>مدير عام</p>
                    </div>
                </div>
                <button onclick="adminLogout()" class="logout-btn">
                    <i class="fas fa-sign-out-alt"></i>
                    تسجيل الخروج
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="main-header">
                <div class="header-left">
                    <button class="sidebar-toggle" onclick="toggleSidebar()">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h1 id="page-title">نظرة عامة</h1>
                </div>
                
                <div class="header-right">
                    <div class="header-stats">
                        <div class="stat-item">
                            <i class="fas fa-clock"></i>
                            <span id="current-time"></span>
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-calendar"></i>
                            <span id="current-date"></span>
                        </div>
                    </div>
                    
                    <div class="notifications">
                        <button class="notification-btn">
                            <i class="fas fa-bell"></i>
                            <span class="notification-badge">3</span>
                        </button>
                    </div>
                </div>
            </header>

            <!-- Overview Tab -->
            <div id="admin-overview-tab" class="tab-content active">
                <!-- Stats Cards -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="total-users">0</h3>
                            <p>إجمالي المستخدمين</p>
                            <span class="stat-change positive">+12% من الشهر الماضي</span>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-store"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="total-restaurants">0</h3>
                            <p>المطاعم المسجلة</p>
                            <span class="stat-change positive">+8% من الشهر الماضي</span>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-shopping-bag"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="total-orders">0</h3>
                            <p>إجمالي الطلبات</p>
                            <span class="stat-change positive">+25% من الشهر الماضي</span>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-money-bill-wave"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="total-revenue">0</h3>
                            <p>إجمالي الإيرادات (أوقية)</p>
                            <span class="stat-change positive">+18% من الشهر الماضي</span>
                        </div>
                    </div>
                </div>

                <!-- Charts Section -->
                <div class="charts-section">
                    <div class="chart-container">
                        <div class="chart-header">
                            <h3>إحصائيات الطلبات الشهرية</h3>
                            <div class="chart-controls">
                                <select id="chart-period">
                                    <option value="month">هذا الشهر</option>
                                    <option value="quarter">هذا الربع</option>
                                    <option value="year">هذا العام</option>
                                </select>
                            </div>
                        </div>
                        <canvas id="ordersChart"></canvas>
                    </div>
                    
                    <div class="chart-container">
                        <div class="chart-header">
                            <h3>توزيع المستخدمين</h3>
                        </div>
                        <canvas id="usersChart"></canvas>
                    </div>
                </div>

                <!-- Recent Activity -->
                <div class="recent-activity">
                    <div class="activity-header">
                        <h3>النشاط الأخير</h3>
                        <button class="refresh-btn" onclick="loadRecentActivity()">
                            <i class="fas fa-sync-alt"></i>
                            تحديث
                        </button>
                    </div>
                    <div class="activity-list" id="recent-activity-list">
                        <!-- Activity items will be loaded here -->
                    </div>
                </div>
            </div>

            <!-- Users Management Tab -->
            <div id="admin-users-tab" class="tab-content">
                <div class="tab-header">
                    <h2>إدارة المستخدمين</h2>
                    <div class="tab-actions">
                        <button class="btn btn-primary" onclick="showAddUserModal()">
                            <i class="fas fa-plus"></i>
                            إضافة مستخدم جديد
                        </button>
                        <button class="btn btn-secondary" onclick="exportUsers()">
                            <i class="fas fa-download"></i>
                            تصدير البيانات
                        </button>
                    </div>
                </div>
                
                <div class="filters-section">
                    <div class="filter-group">
                        <label>نوع المستخدم:</label>
                        <select id="user-type-filter" onchange="filterUsers()">
                            <option value="all">جميع الأنواع</option>
                            <option value="customer">عملاء</option>
                            <option value="restaurant">مطاعم</option>
                            <option value="delivery">وكلاء توصيل</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label>الحالة:</label>
                        <select id="user-status-filter" onchange="filterUsers()">
                            <option value="all">جميع الحالات</option>
                            <option value="active">نشط</option>
                            <option value="inactive">غير نشط</option>
                        </select>
                    </div>
                    
                    <div class="search-group">
                        <input type="text" id="user-search" placeholder="البحث عن مستخدم..." onkeyup="searchUsers()">
                        <i class="fas fa-search"></i>
                    </div>
                </div>
                
                <div class="table-container">
                    <table class="data-table" id="users-table">
                        <thead>
                            <tr>
                                <th>الاسم</th>
                                <th>البريد الإلكتروني</th>
                                <th>النوع</th>
                                <th>الهاتف</th>
                                <th>تاريخ التسجيل</th>
                                <th>الحالة</th>
                                <th>الإجراءات</th>
                            </tr>
                        </thead>
                        <tbody id="users-table-body">
                            <!-- Users data will be loaded here -->
                        </tbody>
                    </table>
                </div>
                
                <div class="pagination" id="users-pagination">
                    <!-- Pagination will be loaded here -->
                </div>
            </div>

            <!-- Restaurants Management Tab -->
            <div id="admin-restaurants-tab" class="tab-content">
                <div class="tab-header">
                    <h2>إدارة المطاعم</h2>
                    <div class="tab-actions">
                        <button class="btn btn-primary" onclick="showAddRestaurantModal()">
                            <i class="fas fa-plus"></i>
                            إضافة مطعم جديد
                        </button>
                        <button class="btn btn-secondary" onclick="exportRestaurants()">
                            <i class="fas fa-download"></i>
                            تصدير البيانات
                        </button>
                    </div>
                </div>
                
                <div class="restaurants-grid" id="restaurants-grid">
                    <!-- Restaurant cards will be loaded here -->
                </div>
            </div>

            <!-- Orders Management Tab -->
            <div id="admin-orders-tab" class="tab-content">
                <div class="tab-header">
                    <h2>إدارة الطلبات</h2>
                    <div class="tab-actions">
                        <button class="btn btn-secondary" onclick="exportOrders()">
                            <i class="fas fa-download"></i>
                            تصدير البيانات
                        </button>
                    </div>
                </div>
                
                <div class="orders-filters">
                    <div class="filter-group">
                        <label>حالة الطلب:</label>
                        <select id="order-status-filter" onchange="filterOrders()">
                            <option value="all">جميع الحالات</option>
                            <option value="pending">معلق</option>
                            <option value="confirmed">مؤكد</option>
                            <option value="preparing">قيد التحضير</option>
                            <option value="ready">جاهز</option>
                            <option value="delivered">تم التوصيل</option>
                            <option value="cancelled">ملغي</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label>التاريخ:</label>
                        <input type="date" id="order-date-filter" onchange="filterOrders()">
                    </div>
                </div>
                
                <div class="orders-list" id="orders-list">
                    <!-- Orders will be loaded here -->
                </div>
            </div>

            <!-- Delivery Agents Tab -->
            <div id="admin-delivery-tab" class="tab-content">
                <div class="tab-header">
                    <h2>إدارة وكلاء التوصيل</h2>
                    <div class="tab-actions">
                        <button class="btn btn-primary" onclick="showAddDeliveryAgentModal()">
                            <i class="fas fa-plus"></i>
                            إضافة وكيل توصيل
                        </button>
                    </div>
                </div>
                
                <div class="delivery-agents-grid" id="delivery-agents-grid">
                    <!-- Delivery agents will be loaded here -->
                </div>
            </div>

            <!-- Analytics Tab -->
            <div id="admin-analytics-tab" class="tab-content">
                <div class="tab-header">
                    <h2>التحليلات والتقارير</h2>
                    <div class="tab-actions">
                        <button class="btn btn-secondary" onclick="generateReport()">
                            <i class="fas fa-file-pdf"></i>
                            إنشاء تقرير
                        </button>
                    </div>
                </div>
                
                <div class="analytics-dashboard">
                    <div class="analytics-cards">
                        <div class="analytics-card">
                            <h3>أداء المبيعات</h3>
                            <canvas id="salesChart"></canvas>
                        </div>
                        
                        <div class="analytics-card">
                            <h3>المطاعم الأكثر طلباً</h3>
                            <canvas id="topRestaurantsChart"></canvas>
                        </div>
                        
                        <div class="analytics-card">
                            <h3>أوقات الذروة</h3>
                            <canvas id="peakHoursChart"></canvas>
                        </div>
                        
                        <div class="analytics-card">
                            <h3>معدل الرضا</h3>
                            <div class="satisfaction-meter">
                                <div class="meter-value" id="satisfaction-value">85%</div>
                                <p>معدل رضا العملاء</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Settings Tab -->
            <div id="admin-settings-tab" class="tab-content">
                <div class="tab-header">
                    <h2>إعدادات النظام</h2>
                </div>
                
                <div class="settings-sections">
                    <div class="settings-section">
                        <h3>الإعدادات العامة</h3>
                        <div class="settings-form">
                            <div class="form-group">
                                <label>اسم المنصة</label>
                                <input type="text" id="platform-name" value="Livreure">
                            </div>
                            
                            <div class="form-group">
                                <label>رسوم التوصيل الافتراضية (أوقية)</label>
                                <input type="number" id="default-delivery-fee" value="100">
                            </div>
                            
                            <div class="form-group">
                                <label>الحد الأدنى للطلب (أوقية)</label>
                                <input type="number" id="minimum-order" value="500">
                            </div>
                        </div>
                    </div>
                    
                    <div class="settings-section">
                        <h3>إعدادات الإشعارات</h3>
                        <div class="settings-toggles">
                            <div class="toggle-item">
                                <label>إشعارات الطلبات الجديدة</label>
                                <label class="toggle">
                                    <input type="checkbox" id="new-orders-notifications" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            
                            <div class="toggle-item">
                                <label>إشعارات تسجيل المطاعم</label>
                                <label class="toggle">
                                    <input type="checkbox" id="restaurant-registration-notifications" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="settings-section">
                        <h3>إعدادات الأمان</h3>
                        <div class="security-settings">
                            <button class="btn btn-warning" onclick="changeAdminPassword()">
                                <i class="fas fa-key"></i>
                                تغيير كلمة المرور
                            </button>
                            
                            <button class="btn btn-danger" onclick="showBackupModal()">
                                <i class="fas fa-database"></i>
                                نسخ احتياطي للبيانات
                            </button>
                        </div>
                    </div>
                    
                    <div class="settings-actions">
                        <button class="btn btn-primary" onclick="saveSettings()">
                            <i class="fas fa-save"></i>
                            حفظ الإعدادات
                        </button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modals -->
    <div id="modal-overlay" class="modal-overlay">
        <div class="modal" id="user-modal">
            <div class="modal-header">
                <h3 id="user-modal-title">إضافة مستخدم جديد</h3>
                <button class="modal-close" onclick="closeModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="user-form">
                    <div class="form-group">
                        <label>الاسم الكامل</label>
                        <input type="text" id="user-name" required>
                    </div>
                    
                    <div class="form-group">
                        <label>البريد الإلكتروني</label>
                        <input type="email" id="user-email" required>
                    </div>
                    
                    <div class="form-group">
                        <label>نوع المستخدم</label>
                        <select id="user-type" required>
                            <option value="">اختر النوع</option>
                            <option value="customer">عميل</option>
                            <option value="restaurant">مطعم</option>
                            <option value="delivery">وكيل توصيل</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>رقم الهاتف</label>
                        <input type="tel" id="user-phone" required>
                    </div>
                    
                    <div class="form-group">
                        <label>كلمة المرور</label>
                        <input type="password" id="user-password" required>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal()">إلغاء</button>
                <button class="btn btn-primary" onclick="saveUser()">حفظ</button>
            </div>
        </div>
    </div>

    <!-- Notification Container -->
    <div id="notification-container" class="notification-container"></div>

    <!-- Footer -->
    <footer class="admin-footer">
        <div class="footer-content">
            <p>© 2024 Livreure Admin Dashboard. جميع الحقوق محفوظة.</p>
            <div class="footer-links">
                <a href="https://t.me/raone_002" target="_blank" class="footer-link">
                    <i class="fab fa-telegram"></i>
                    Made with ra-one02
                </a>
            </div>
        </div>
    </footer>

    <script src="admin-script.js"></script>
</body>
</html>

